{"version":3,"sources":["components/Entry.js","components/Entries.js","components/NewPersonForm.js","components/Notification.js","components/ErrorMessage.js","components/Filter.js","services/persons.js","App.js","index.js"],"names":["Entry","_ref","name","number","deleteEntry","id","react_default","a","createElement","Fragment","onClick","Entries","persons","map","person","components_Entry","key","NewPersonForm","props","onSubmit","addPerson","value","newName","onChange","handleNewName","newNumber","handleNewNumber","type","Notification","message","className","ErrorMessage","errorMessage","Filter","filter","handleFilter","baseUrl","services_persons","axios","get","then","response","data","newObject","post","delete","concat","put","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setFilter","_useState9","_useState10","setMessage","_useState11","_useState12","setErrorMessage","useEffect","personService","initialPeople","messager","setTimeout","updateNumber","personId","newPerson","returnedPerson","catch","error","personsToShow","toLowerCase","includes","components_Notification","components_ErrorMessage","components_Filter","event","console","log","target","components_NewPersonForm","preventDefault","some","window","confirm","find","objectSpread","components_Entries","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.c3eabc8f.chunk.js","sourcesContent":["import React from 'react';\n\nconst Entry = ({name, number, deleteEntry, id}) => {\n  return (\n    <>\n      <li>\n        {name}: {number}\n        <button onClick={() => deleteEntry(id)}>Delete</button>\n      </li>\n    </>\n  );\n};\n\nexport default Entry;\n","import React from 'react';\n\nimport Entry from \"./Entry.js\";\n\n// IMPORTANT: don't define components inside App !!\n\nconst Entries = ({persons, deleteEntry}) => {\n  const rows = () => (\n    persons.map(person =>\n      <Entry\n        key={person.id}\n        name={person.name}\n        number={person.number}\n        deleteEntry={deleteEntry}\n        id={person.id}\n      />\n    )\n  );\n  return (\n    <>\n      <ul>\n        {rows()}\n      </ul>\n    </>\n  );\n};\n\nexport default Entries;\n","import React from 'react';\n\nconst NewPersonForm = (props) => {\n  return (\n    <form onSubmit={props.addPerson}>\n      <div>\n        nimi: <input value={props.newName} onChange={props.handleNewName}/>\n      </div>\n      <div>\n        numero: <input value={props.newNumber} onChange={props.handleNewNumber}/>\n      </div>\n      <div>\n        <button type=\"submit\">lisää</button>\n      </div>\n    </form>\n  );\n};\n\nexport default NewPersonForm\n","import React from 'react';\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return (\n    <div className=\"notification\">\n      {message}\n    </div>\n  );\n};\n\nexport default Notification;\n","import React from 'react';\n\nconst ErrorMessage = ({ errorMessage }) => {\n  if (errorMessage === null) {\n    return null;\n  }\n\n  return (\n    <div className=\"errormessage\">\n      {errorMessage}\n    </div>\n  );\n};\n\n\nexport default ErrorMessage;\n","import React from 'react';\n\nconst Filter = (props) => (\n  <div>\n    rajaa näytettäviä: <input value={props.filter} onChange={props.handleFilter}/>\n  </div>\n);\n\n\nexport default Filter;\n","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst deleteEntry = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nexport default {\n  getAll: getAll,\n  create: create,\n  deleteEntry: deleteEntry,\n  update: update\n}\n","import React, { useState, useEffect } from 'react';\n\nimport Entries from \"./components/Entries.js\";\nimport NewPersonForm from \"./components/NewPersonForm.js\";\nimport Notification from \"./components/Notification.js\";\nimport ErrorMessage from \"./components/ErrorMessage.js\";\nimport Filter from \"./components/Filter.js\";\nimport personService from './services/persons.js';\n\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]);\n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber ] = useState('');\n  const [ filter, setFilter ] = useState('');\n  const [ message, setMessage ] = useState(null);\n  const [ errorMessage, setErrorMessage ] = useState(null);\n\n  const hook = () => {\n    personService\n      .getAll()\n      .then(initialPeople => {\n        setPersons(initialPeople);\n      });\n  };\n  useEffect(hook, []);\n\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    if (persons.some((person) => person.name === newName)) {\n      if (window.confirm(`${newName} already has entry, update number?`)) {\n        let person = persons.find((person) => person.name === newName);\n        let newPerson = {...person, number: newNumber};\n        setNewName('');\n        setNewNumber('');\n        return updateNumber(person.id, newPerson);\n      } else {\n        setNewName('');\n        setNewNumber('');\n        return;\n      }\n    }\n\n    const personObject = {\n      \"name\": newName,\n      \"number\": newNumber\n    };\n    personService\n      .create(personObject)\n      .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson));\n        setNewName('');\n        setNewNumber('');\n      });\n    setMessage(`Successfully added ${newName}`);\n    setTimeout(() => {\n      setMessage(null);\n    }, 5000);\n\n  };\n\n  const removePerson = (personId) => {\n    let person = persons.find(person => person.id === personId);\n    if (!window.confirm(`Really delete entry ${person.name}?`)) {\n      return;\n    }\n\n    personService\n      .deleteEntry(personId)\n      .then(() => {\n        setPersons(persons.filter(person => person.id !== personId));\n      })\n      .then(() => {\n        messager(`Successfully removed ${person.name}`);\n      })\n      .catch((error) => {\n        setErrorMessage(`Failed: ${person.name} was not found on the server`);\n      });\n  };\n\n  const messager = (message) => {\n    setMessage(message);\n    setTimeout(() => {\n      setMessage(null);\n    }, 5000);\n  };\n\n  const updateNumber = (personId, newPerson) => {\n    personService\n      .update(personId, newPerson)\n      .then(returnedPerson => {\n        setPersons(persons.map(person => person.id !== personId ? person : returnedPerson));\n      })\n      .then(() => {\n        messager(`Successfully updated ${newPerson.name}`);\n      })\n      .catch((error) => {\n        setErrorMessage(`Failed: ${newPerson.name} was not found on the server`);\n      });\n  };\n\n  const handleNewName = (event) => {\n    console.log(event.target.value);\n    setNewName(event.target.value);\n  };\n\n  const handleNewNumber = (event) => {\n    console.log(event.target.value);\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilter = (event) => {\n    console.log(event.target.value);\n    setFilter(event.target.value.toLowerCase());\n  };\n\n  const personsToShow = !filter\n    ? persons\n    : persons.filter(person => person.name.toLowerCase().includes(filter));\n\n\n  // IMPORTANT: don't define components inside App !!\n  // The state will be messed up\n  // The component would be redefined every time App rerenders.\n  // one symptom: text field will lose focus after every typed letter\n\n  return (\n    <div>\n      <h2>Puhelinluettelo</h2>\n      <Notification message={message} />\n      <ErrorMessage errorMessage={errorMessage} />\n\n      <Filter filter={filter} handleFilter={handleFilter}/>\n      <h2>Lisää uusi numero</h2>\n      <NewPersonForm\n        addPerson={addPerson}\n        newName={newName}\n        handleNewName={handleNewName}\n        newNumber={newNumber}\n        handleNewNumber={handleNewNumber}\n      />\n      <h2>Numerot</h2>\n      <Entries persons={personsToShow} deleteEntry={removePerson}/>\n    </div>\n  );\n\n};\n\nexport default App;\n\n\n// https://fullstackopen-2019.github.io/osa2/lomakkeiden_kasittely\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}